<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Tableau Triable et Filtrable</title>
  <style>
    table,
    th,
    td {
      border: 1px solid black;
      border-collapse: collapse;
      padding: 5px;
    }

    th {
      cursor: pointer;
    }
  </style>
</head>

<body>
  <table id="myTable">
    <thead>
      <tr>
        <th><input type="text" onkeyup="filterTable(0)" placeholder="Filtrer par nom"></th>
        <th><input type="text" onkeyup="filterTable(1)" placeholder="Filtrer par prénom"></th>
        <th><input type="text" onkeyup="filterTable(2)" placeholder="Filtrer par âge"></th>
        <th><input type="text" onkeyup="filterTable(3)" placeholder="Filtrer par adresse"></th>
      </tr>
      <tr>
        <th onclick="sortTable(0)">Nom</th>
        <th onclick="sortTable(1)">Prénom</th>
        <th onclick="sortTable(2)">Âge</th>
        <th onclick="sortTable(3)">Adresse</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Dupont</td>
        <td>Jean</td>
        <td>25</td>
        <td>12 Rue des Lilas</td>
      </tr>
      <tr>
        <td>Martin</td>
        <td>Marie</td>
        <td>32</td>
        <td>8 Avenue des Roses</td>
      </tr>
      <tr>
        <td>Leclerc</td>
        <td>Paul</td>
        <td>47</td>
        <td>24 Rue de la Paix</td>
      </tr>
      <tr>
        <td>Durand</td>
        <td>Alice</td>
        <td>18</td>
        <td>3 Rue des Champs</td>
      </tr>
    </tbody>
  </table>
  <script>
    function sortTable(column) {
      var table = document.getElementById("myTable");
      console.log(table)
      console.log('bob')
      // var rows = Array.prototype.slice.call(table.rows);
      var rows = Array.prototype.slice.call(table.tBodies[0].rows);
      // var headerRow = rows.shift();
      // var isAscending = headerRow.cells[column].classList.toggle("ascending");
      var isAscending = table.tHead.rows[0].cells[column].classList.toggle("ascending");
      var multiplier = isAscending ? 1 : -1;
      rows.sort(function (a, b) {
        var aVal = a.cells[column].textContent;
        var bVal = b.cells[column].textContent;
        if (!isNaN(aVal) && !isNaN(bVal)) {
          aVal = Number(aVal);
          bVal = Number(bVal);
          return multiplier * (aVal - bVal); 
        }
        return multiplier * aVal.localeCompare(bVal);
      });
      // rows.unshift(headerRow);
      // table.tBodies[0].innerHTML = "";
      table.tBodies[0].innerHTML = "";
      rows.forEach(function (row) {
        table.tBodies[0].appendChild(row);
      });
    }

    function filterTable(column) {
      var table = document.getElementById("myTable");
      var input = table.rows[0].cells[column].querySelector("input");
      var filterText = input.value.toUpperCase();
      var rows = Array.prototype.slice.call(table.tBodies[0].rows);
      rows.forEach(function (row) {
        var cellText = row.cells[column].textContent.toUpperCase();
        if (cellText.indexOf(filterText) > -1) {
          row.style.display = "";
        } else {
          row.style.display = "none";
        }
      });
    }
  </script>

</body>

</html>