<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

<style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  /* width: 80%; */
  text-align: left;
  margin-left: 2.5%
}
th, td {
  border: 1px solid #dddddd; /* Bordure pour chaque cellule */
  text-align: left;
  padding: 8px; /* Espacement interne pour chaque cellule */
}
tbody tr:nth-child(even) {
  background-color: #f2f2f2; /* Couleur de fond pour les lignes paires */
}
.top-search-container {
  display: block;
  align-items: center;
  /* border: 1px solid #4f1616; */
  /* padding: 5px; */
  margin: 5px auto;
  border-radius: 5px;
  /* width: 300px; */
}
.search-container {
  /* display: flex; */
  align-items: center;
  border: 1px solid #4f1616;
  /* padding: 5px; */
  border-radius: 5px;
  /* width: 300px; */
}


</style>
</head>
<body>
  <h1>Hosts</h1>
  <table>
<thead>
<tr><th>hostname  </th><th>os     </th><th style="text-align: right;">  cost</th></tr>
</thead>
<tbody>
<tr><td>host_4    </td><td>windows</td><td style="text-align: right;">   800</td></tr>
<tr><td>host_1    </td><td>linux  </td><td style="text-align: right;">   500</td></tr>
<tr><td>host_2    </td><td>linux  </td><td style="text-align: right;">   600</td></tr>
<tr><td>host_3    </td><td>windows</td><td style="text-align: right;">   700</td></tr>
<tr><td>host_5    </td><td>linux  </td><td style="text-align: right;">   900</td></tr>
<tr><td>host_6    </td><td>windows</td><td style="text-align: right;">  1000</td></tr>
<tr><td>host_7    </td><td>linux  </td><td style="text-align: right;">   950</td></tr>
</tbody>
</table>
    <br>
    <br>
    <br>
  <h1>VIPs</h1>
  <table>
<thead>
<tr><th>name  </th><th>target host</th><th style="text-align: right;">  port</th><th>coment</th></tr>
</thead>
<tbody>
<tr><td>vip_1 </td><td>host_1       </td><td style="text-align: right;">80</td><td>vcezfvez zfez fez fzezfezfez fe vcezfvez zfez fez fzezfezfez fe vcezfvez zfez fez fzezfezfez fe vcezfvez zfez fez fzezfezfez fe ez fe</td></tr>
<tr><td>vip_2 </td><td>host_2       </td><td style="text-align: right;">80</td><td>host_2</td></tr>
<tr><td>vip_3 </td><td>host_3       </td><td style="text-align: right;">80</td><td>host_2</td></tr>
<tr><td>vip_4 </td><td>host_4       </td><td style="text-align: right;">80</td><td>host_2</td></tr>
</tbody>
</table>
</body>
<script>
  var tables = document.getElementsByTagName('table');
  top_search_box = "<input type='text' class='top-search-container' onkeyup='filterAllTables()' placeholder='filter on all tables'>\n"
  $(top_search_box).prependTo("body");
  console.log(top_search_box);
  let table_id = 0;
  for (const table of tables) {
      let prepa_search_boxes = "<tr>\n";
      let column_id = 0;
      table.id = table_id;

      for (const cell of table.tHead.rows.item(0).cells) {
        cell.onclick = (function(table_id, column_id) {
            return function() {
                sortTable(table_id, column_id);
            };
        })(table_id, column_id);
        prepa_search_boxes = prepa_search_boxes + "<th><input type='text' class='search-container' onkeyup='filterTable(" +
          table_id + "," + column_id + ")' placeholder='filter by " + cell.innerText   + "'></th>\n";
        column_id++;
      }
      prepa_search_boxes = prepa_search_boxes + "</tr>";
      $(table.tHead).prepend(prepa_search_boxes);
      table_id++;

  }

    function filterTable(table_id,column) {
      var table = document.getElementById(table_id);
      var input = table.rows[0].cells[column].querySelector("input");
      var filterText = input.value.toUpperCase();
      var rows = Array.prototype.slice.call(table.tBodies[0].rows);
      rows.forEach(function (row) {
        var cellText = row.cells[column].textContent.toUpperCase();
        if (cellText.indexOf(filterText) > -1) {
          row.style.display = "";
        } else {
          row.style.display = "none";
        }
      });
    }

    function filterAllTables() {
      var search_input = $("input.top-search-container").val().toUpperCase();
      for (const table of tables) {
        var rows = Array.prototype.slice.call(table.tBodies[0].rows);
        rows.forEach(function (row) {
          var cellText = row.textContent.toUpperCase();
          if (cellText.indexOf(search_input) > -1) {
            row.style.display = "";
          } else {
            row.style.display = "none";
          }
        });
      }
    }

    function sortTable(table_id,column) {
      var table = document.getElementById(table_id);
      var rows = Array.prototype.slice.call(table.tBodies[0].rows);
      var isAscending = table.tHead.rows[0].cells[column].classList.toggle("ascending");
      var multiplier = isAscending ? 1 : -1;
      rows.sort(function (a, b) {
        var aVal = a.cells[column].textContent;
        var bVal = b.cells[column].textContent;
        if (!isNaN(aVal) && !isNaN(bVal)) {
          aVal = Number(aVal);
          bVal = Number(bVal);
          return multiplier * (aVal - bVal); 
        } else {
        return multiplier * aVal.localeCompare(bVal);
        }
      });
      table.tBodies[0].innerHTML = "";
      rows.forEach(function (row) {
        table.tBodies[0].appendChild(row);
      });
    }



</script>
</html>
